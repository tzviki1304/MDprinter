<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¦×™×’ Markdown ×œ×”×“×¤×¡×”</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* --- ×”×’×“×¨×•×ª ××¡×š ×¨×’×™×œ×•×ª --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .controls {
            background-color: #ffffff;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: white;
            transition: background-color 0.3s;
        }
        .btn-primary { background-color: #007bff; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-secondary { background-color: #6c757d; }
        .btn-secondary:hover { background-color: #545b62; }
        .btn-success { background-color: #28a745; }
        .btn-success:hover { background-color: #218838; }
        .btn-warning { background-color: #ffc107; color: #333; }
        .btn-warning:hover { background-color: #e0a800; }
        
        input[type="file"] { 
            padding: 10px; 
            background: #eee; 
            border-radius: 5px;
            cursor: pointer;
        }

        /* ××–×•×¨ ×¢×¨×™×›×” */
        .editor-container {
            max-width: 90%;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
        }

        .editor-container.active {
            display: block;
        }

        #mdInput {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            direction: ltr;
            text-align: left;
        }

        #mdInput:focus {
            outline: none;
            border-color: #007bff;
        }

        .page-container {
            max-width: 80%;
            min-height: 297mm;
            margin: 30px auto;
            background-color: white;
            padding: 20mm;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            box-sizing: border-box;
        }

        #content { 
            line-height: 1.6; 
            font-size: 16px;
        }
        
        #content img { 
            max-width: 100%; 
            height: auto; 
        }
        
        #content pre { 
            background-color: #f4f4f4; 
            padding: 10px; 
            overflow-x: auto; 
            white-space: pre-wrap; 
            word-wrap: break-word;
            border-radius: 5px;
        }
        
        /* ×ª××™×“ ×œ×”×¦×™×’ ×§×˜×¢×™ ×§×•×“ ×‘×›×™×•×•×Ÿ×Ÿ LTR ×•×™×™×©×•×¨ ×©×××œ */
        #content pre,
        #content pre code,
        #content code {
            direction: ltr !important;
            unicode-bidi: embed !important;
            text-align: left !important;
            white-space: pre !important;
        }
        
        #content blockquote { 
            border-right: 4px solid #007bff; 
            margin: 0; 
            padding: 10px; 
            background: #f9f9f9;
            border-radius: 3px;
        }

        #content h1, #content h2, #content h3 {
            color: #2c3e50;
            margin-top: 1.5em;
        }

        #content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }

        #content table th,
        #content table td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #content table th {
            background-color: #007bff;
            color: white;
        }
        
        /* --- ×”×’×“×¨×•×ª ×”×“×¤×¡×” --- */
        @media print {
            .controls {
                display: none !important;
            }

            .editor-container {
                display: none !important;
            }

            .page-container {
                margin: 0;
                padding: 0;
                box-shadow: none;
                background-color: white;
                max-width: none;
                overflow: visible !important;
            }

            body, html {
                background-color: white;
                height: auto;
                overflow: visible !important;
            }
            
            #content {
                color: black !important;
            }

            #content pre,
            #content pre code,
            #content code {
                direction: ltr !important;
                unicode-bidi: embed !important;
                text-align: left !important;
                white-space: pre !important;
            }
        }
    </style>
</head>
<body>

    <div class="controls">
        <input type="file" id="fileInput" accept=".md,.txt">
        <button class="btn btn-success" onclick="toggleEditor()">âœï¸ ×¢×¨×™×›×ª ×˜×§×¡×˜</button>
        <button class="btn btn-secondary" onclick="toggleDirection()">×©×™× ×•×™ ×›×™×•×•×Ÿ (RTL/LTR)</button>
        <button class="btn btn-warning" onclick="clearContent()">ğŸ—‘ï¸ × ×§×”</button>
        <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ ×©××•×¨ ×›-PDF</button>
    </div>

    <div class="editor-container" id="editorContainer">
        <h3 style="margin-top: 0;">×”×›× ×¡ ×˜×§×¡×˜ Markdown:</h3>
        <textarea id="mdInput" placeholder="# ×›×•×ª×¨×ª ×¨××©×™×ª

×–×”×• ×˜×§×¡×˜ ×“×•×’××” ×‘-Markdown.

## ×›×•×ª×¨×ª ××©× ×”

- ×¤×¨×™×˜ 1
- ×¤×¨×™×˜ 2
- ×¤×¨×™×˜ 3

**×˜×§×¡×˜ ××•×“×’×©** ×•-*×˜×§×¡×˜ × ×˜×•×™*

```python
def hello():
    print('Hello World!')
```"></textarea>
        <div style="margin-top: 15px; display: flex; gap: 10px;">
            <button class="btn btn-primary" onclick="renderMarkdown()">âœ… ×”×¦×’</button>
            <button class="btn btn-secondary" onclick="saveMarkdown()">ğŸ’¾ ×©××•×¨ MD</button>
        </div>
    </div>

    <div class="page-container">
        <div id="content">
            <div style="text-align:center; color:black; margin-top:50px;">
                ×× × ×˜×¢×Ÿ ×§×•×‘×¥ MD ××• ×œ×—×¥ ×¢×œ "×¢×¨×™×›×ª ×˜×§×¡×˜"...
            </div>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const contentDiv = document.getElementById('content');
        const editorContainer = document.getElementById('editorContainer');
        const mdInput = document.getElementById('mdInput');
        let isRTL = true;

        // ×˜×¢×™× ×ª ×§×•×‘×¥
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const mdText = e.target.result;
                mdInput.value = mdText;
                contentDiv.innerHTML = marked.parse(mdText);
                applyCodeBlocksLTR();
            };
            reader.readAsText(file);
        });

        // ×¤×ª×™×—×”/×¡×’×™×¨×” ×©×œ ×¢×•×¨×š
        function toggleEditor() {
            editorContainer.classList.toggle('active');
        }

        // ×¢×™×‘×•×“ Markdown
        function renderMarkdown() {
            const mdText = mdInput.value;
            if (mdText.trim()) {
                contentDiv.innerHTML = marked.parse(mdText);
                applyCodeBlocksLTR();
                editorContainer.classList.remove('active');
            } else {
                alert('×× × ×”×›× ×¡ ×˜×§×¡×˜ Markdown');
            }
        }

        // ×©××™×¨×ª ×§×•×‘×¥ MD
        function saveMarkdown() {
            const mdText = mdInput.value;
            if (!mdText.trim()) {
                alert('××™×Ÿ ×˜×§×¡×˜ ×œ×©××•×¨');
                return;
            }
            
            const blob = new Blob([mdText], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'document.md';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // × ×™×§×•×™ ×ª×•×›×Ÿ
        function clearContent() {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ× ×§×•×ª ××ª ×”×ª×•×›×Ÿ?')) {
                mdInput.value = '';
                contentDiv.innerHTML = '<div style="text-align:center; color:black; margin-top:50px;">×× × ×˜×¢×Ÿ ×§×•×‘×¥ MD ××• ×œ×—×¥ ×¢×œ "×¢×¨×™×›×ª ×˜×§×¡×˜"...</div>';
            }
        }

        // ×©×™× ×•×™ ×›×™×•×•×Ÿ
        function toggleDirection() {
            isRTL = !isRTL;
            contentDiv.style.direction = isRTL ? 'rtl' : 'ltr';
            contentDiv.style.textAlign = isRTL ? 'right' : 'left';
            
            // ×ª×™×§×•×Ÿ ×œ-Blockquote ×‘×”×—×œ×¤×ª ×›×™×•×•×Ÿ
            const bqs = document.querySelectorAll('blockquote');
            bqs.forEach(bq => {
                if(isRTL) {
                    bq.style.borderRight = "4px solid #007bff";
                    bq.style.borderLeft = "none";
                } else {
                    bq.style.borderLeft = "4px solid #007bff";
                    bq.style.borderRight = "none";
                }
            });

            applyCodeBlocksLTR();
        }

        // ×•×™×“×•× ×©×§×˜×¢×™ ×§×•×“ ×ª××™×“ LTR
        function applyCodeBlocksLTR() {
            const codeBlocks = document.querySelectorAll('#content pre, #content pre code, #content code');
            codeBlocks.forEach(el => {
                el.style.direction = 'ltr';
                el.style.unicodeBidi = 'embed';
                el.style.textAlign = 'left';
                el.style.whiteSpace = 'pre';
            });
        }

        // ×˜×¢×™× ×ª ×“×•×’××” ××•×˜×•××˜×™×ª (××•×¤×¦×™×•× ×œ×™)
        window.addEventListener('load', function() {
            // ××¤×©×¨ ×œ×”×¡×™×¨ ××ª ×”×”×¢×¨×” ×›×“×™ ×œ×˜×¢×•×Ÿ ×“×•×’××” ××•×˜×•××˜×™×ª
            // renderMarkdown();
        });
    </script>
</body>
</html>
